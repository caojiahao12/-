ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"driver.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.__driv_match,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	__driv_match:
  26              	.LVL0:
  27              	.LFB3:
  28              		.file 1 "C:/Users/\262\334\274\322\272\300/.iotlink/sdk/IoT_LINK/iot_link/driver/driver.c"
   1:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*----------------------------------------------------------------------------
   2:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * Copyright (c) <2018>, <Huawei Technologies Co., Ltd>
   3:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * All rights reserved.
   4:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * are permitted provided that the following conditions are met:
   6:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * conditions and the following disclaimer.
   8:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * provided with the distribution.
  11:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * to endorse or promote products derived from this software without specific prior written
  13:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * permission.
  14:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  *---------------------------------------------------------------------------*/
  26:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*----------------------------------------------------------------------------
  27:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * Notice of Export Control Law
  28:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * ===============================================
  29:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 2


  31:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  * applicable export control laws and regulations.
  33:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  *---------------------------------------------------------------------------*/
  34:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /**
  35:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  *  DATE                AUTHOR      INSTRUCTION
  36:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  *  2019-05-14 09:36  zhangqianfu  The first version  
  37:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  *
  38:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****  */
  39:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #include <string.h>
  40:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #include <stdio.h>
  41:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #include <stdlib.h>
  42:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #include <driver.h>
  43:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #include <sys/fcntl.h>
  44:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  45:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  46:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #define cn_driv_status_initialized     (1<<0)
  47:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #define cn_driv_status_opend           (1<<1)
  48:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  49:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  50:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //define the error type has happened in the driver
  51:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** typedef enum
  52:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
  53:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     en_dev_err_none = 0,   //no err happened
  54:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     en_dev_err_init,       //call bsp open function failed
  55:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     en_dev_err_open,       //call bsp init function failed
  56:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  57:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }en_dev_error_type;
  58:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  59:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  60:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** struct driv_cb
  61:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
  62:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     void                  *nxt;              //add the deice to device list
  63:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     void                  *pri;              //bsp developed para
  64:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     const char            *name;             //the device name
  65:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     int                    flagmask;         //copy from the register
  66:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     const los_driv_op_t   *op;               //operation method
  67:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int           drivstatus;       //show the state here like init or something like this
  68:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     los_dev_t              devlst;           //the open list,support the multi open
  69:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //following member used for the debug
  70:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     size_t            total_write;            //how many data has been sent
  71:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     size_t            total_read;             //how many data has received
  72:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     size_t            opencounter;            //reference counter
  73:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int      errno;                  //the last errno has happend
  74:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** };
  75:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** typedef struct
  76:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
  77:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     osal_mutex_t                    lock;      //used to lock the devlst
  78:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb                 *drivlst;   //all the dev will be added to the list
  79:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int                    drivnum;
  80:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }los_driv_module;
  81:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** static  los_driv_module   s_los_driv_module ;  //manage all the driver here
  82:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  83:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //used this function to find a dev
  84:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** static struct driv_cb *__driv_match(const char *name)
  85:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
  29              		.loc 1 85 1 view -0
  30              		.cfi_startproc
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 3


  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  86:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *ret = NULL;
  33              		.loc 1 86 5 view .LVU1
  87:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  88:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ret = s_los_driv_module.drivlst;
  34              		.loc 1 88 5 view .LVU2
  85:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *ret = NULL;
  35              		.loc 1 85 1 is_stmt 0 view .LVU3
  36 0000 38B5     		push	{r3, r4, r5, lr}
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 16
  39              		.cfi_offset 3, -16
  40              		.cfi_offset 4, -12
  41              		.cfi_offset 5, -8
  42              		.cfi_offset 14, -4
  43              		.loc 1 88 9 view .LVU4
  44 0002 074B     		ldr	r3, .L8
  45 0004 5C68     		ldr	r4, [r3, #4]
  46              	.LVL1:
  89:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     while(NULL != ret)
  47              		.loc 1 89 5 is_stmt 1 view .LVU5
  85:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *ret = NULL;
  48              		.loc 1 85 1 is_stmt 0 view .LVU6
  49 0006 0546     		mov	r5, r0
  50              	.LVL2:
  51              	.L2:
  52              		.loc 1 89 10 is_stmt 1 view .LVU7
  53 0008 0CB9     		cbnz	r4, .L4
  54              	.L1:
  90:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
  91:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(0 == strcmp(name,ret->name))
  92:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
  93:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             break;
  94:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
  95:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         ret = ret->nxt;
  96:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
  97:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
  98:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
  99:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
  55              		.loc 1 99 1 is_stmt 0 view .LVU8
  56 000a 2046     		mov	r0, r4
  57 000c 38BD     		pop	{r3, r4, r5, pc}
  58              	.LVL3:
  59              	.L4:
  91:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
  60              		.loc 1 91 9 is_stmt 1 view .LVU9
  91:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
  61              		.loc 1 91 17 is_stmt 0 view .LVU10
  62 000e A168     		ldr	r1, [r4, #8]
  63 0010 2846     		mov	r0, r5
  64 0012 FFF7FEFF 		bl	strcmp
  65              	.LVL4:
  91:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
  66              		.loc 1 91 11 view .LVU11
  67 0016 0028     		cmp	r0, #0
  68 0018 F7D0     		beq	.L1
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 4


  95:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
  69              		.loc 1 95 9 is_stmt 1 view .LVU12
  95:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
  70              		.loc 1 95 13 is_stmt 0 view .LVU13
  71 001a 2468     		ldr	r4, [r4]
  72              	.LVL5:
  95:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
  73              		.loc 1 95 13 view .LVU14
  74 001c F4E7     		b	.L2
  75              	.L9:
  76 001e 00BF     		.align	2
  77              	.L8:
  78 0020 00000000 		.word	.LANCHOR0
  79              		.cfi_endproc
  80              	.LFE3:
  82              		.section	.rodata.__driv_show_shell.str1.1,"aMS",%progbits,1
  83              	.LC0:
  84 0000 25733A74 		.ascii	"%s:total %d drivers\012\015\000"
  84      6F74616C 
  84      20256420 
  84      64726976 
  84      6572730A 
  85              	.LC1:
  86 0016 73746174 		.ascii	"status\000"
  86      757300
  87              	.LC2:
  88 001d 666C6167 		.ascii	"flagmask\000"
  88      6D61736B 
  88      00
  89              	.LC3:
  90 0026 64726976 		.ascii	"drivername\000"
  90      65726E61 
  90      6D6500
  91              	.LC4:
  92 0031 252D3136 		.ascii	"%-16s %-8s %-8s %-8s %-8s %-8s %-8s\015\012\000"
  92      7320252D 
  92      38732025 
  92      2D387320 
  92      252D3873 
  93              	.LC5:
  94 0057 6572726E 		.ascii	"errno\000"
  94      6F00
  95              	.LC6:
  96 005d 6F70656E 		.ascii	"open\000"
  96      00
  97              	.LC7:
  98 0062 72656164 		.ascii	"readbyte\000"
  98      62797465 
  98      00
  99              	.LC8:
 100 006b 77726974 		.ascii	"writbyte\000"
 100      62797465 
 100      00
 101              	.LC9:
 102 0074 252D3136 		.ascii	"%-16s %08x %08x %08x %08x %08x %08x\015\012\000"
 102      73202530 
 102      38782025 
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 5


 102      30387820 
 102      25303878 
 103              		.section	.text.__driv_show_shell,"ax",%progbits
 104              		.align	1
 105              		.syntax unified
 106              		.thumb
 107              		.thumb_func
 108              		.fpu fpv4-sp-d16
 110              	__driv_show_shell:
 111              	.LVL6:
 112              	.LFB15:
 100:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 101:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 102:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :bsp developer use this function to add a device to the system
 103:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :
 104:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :NULL if failed else return the device handle
 105:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 106:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 107:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** los_driv_t los_driv_register(os_driv_para_t *para)
 108:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 109:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb  *driv = NULL;
 110:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 111:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if((NULL == para->name)||(NULL == para->op))
 112:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 113:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_PARAS;
 114:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 115:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 116:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv = osal_malloc(sizeof(struct driv_cb));
 117:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 118:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 119:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_MALLOC;
 120:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 121:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) memset(driv,0,sizeof(struct driv_cb));
 122:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 123:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //do the member initialize
 124:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->name = para->name;
 125:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->op = para->op;
 126:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->pri = para->pri;
 127:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->flagmask = para->flag;
 128:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 129:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //add it to the device list if no device with the same name exsit
 130:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == osal_mutex_lock(s_los_driv_module.lock))
 131:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 132:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_MUTEX;
 133:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 134:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 135:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL != __driv_match(para->name))
 136:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 137:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_EXISTED;
 138:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 139:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 140:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->nxt = s_los_driv_module.drivlst;
 141:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     s_los_driv_module.drivlst = driv;
 142:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 143:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 144:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     s_los_driv_module.drivnum++;
 145:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 6


 146:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return driv;
 147:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 148:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 149:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_EXISTED:
 150:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 151:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEX:
 152:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     osal_free(driv);
 153:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv = NULL;
 154:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MALLOC:
 155:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_PARAS:
 156:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return driv;
 157:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 158:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 159:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 160:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :bsp developer use this function to remove a device from the system
 161:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :
 162:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :if the device has been refered,then will fail here
 163:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 164:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** bool_t los_driv_unregister(const char *name)
 165:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 166:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *tmp = NULL;
 167:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *pre = NULL;
 168:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t         ret = false;
 169:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == name)
 170:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 171:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         return ret;
 172:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 173:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 174:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(osal_mutex_lock(s_los_driv_module.lock))
 175:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 176:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         tmp = s_los_driv_module.drivlst;
 177:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         pre = NULL;
 178:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         while(NULL != tmp)
 179:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 180:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if( 0 == strcmp(name,tmp->name))
 181:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 182:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 break;
 183:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 184:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             pre = tmp;
 185:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             tmp = tmp->nxt;
 186:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 187:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(NULL != tmp)  //find the device here
 188:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 189:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if(pre == NULL)
 190:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 191:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 s_los_driv_module.drivlst = tmp->nxt;
 192:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 193:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             else
 194:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 195:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 pre->nxt = tmp->nxt;
 196:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 197:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 198:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             osal_free(tmp);
 199:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             ret = true;
 200:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 201:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             s_los_driv_module.drivnum--;
 202:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 7


 203:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 204:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (void) osal_mutex_unlock(s_los_driv_module.lock);
 205:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 206:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 207:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
 208:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 209:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 210:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 211:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :bsp developer use this function to notify the application any event has happened
 212:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :
 213:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :not implement yet,we will do it as the asynchronize call
 214:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 215:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** bool_t los_driv_event(los_driv_t driv,unsigned int event,void *para)
 216:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 217:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return false;
 218:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 219:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 220:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 221:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #ifdef __CC_ARM /* ARM C Compiler ,like keil,options for linker:--keep *.o(osdriv)*/
 222:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     extern unsigned int osdriv$$Base;
 223:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     extern unsigned int osdriv$$Limit;
 224:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 225:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #elif defined(__GNUC__)
 226:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     extern unsigned int __osdriv_start;
 227:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     extern unsigned int __osdriv_end;
 228:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #else
 229:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     #error("unknown compiler here");
 230:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #endif
 231:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 232:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 233:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** static void osdriv_load_static(void){
 234:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 235:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     os_driv_para_t *para;
 236:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int num = 0;
 237:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int i = 0;
 238:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #if defined (__CC_ARM)    //you could add other compiler like this
 239:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     num = ((unsigned int)&osdriv$$Limit-(unsigned int)&osdriv$$Base)/sizeof(os_driv_para_t);
 240:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     para = (os_driv_para_t *) &osdriv$$Base;
 241:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #elif defined(__GNUC__)
 242:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 243:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     para = (os_driv_para_t *)&__osdriv_start;
 244:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     num = ((unsigned int )(uintptr_t)&__osdriv_end - (unsigned int)(uintptr_t)&__osdriv_start)/size
 245:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #endif
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     for(i =0;i<num;i++)
 247:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 248:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (void) los_driv_register(para);
 249:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         para++;
 250:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 251:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 252:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return;
 253:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 254:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 255:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 256:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :the device module entry
 257:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :
 258:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :call this function to initialize the device module here
 259:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               load the static init from section os_device
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 8


 260:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 261:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** bool_t  los_driv_init()
 262:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 263:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 264:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 265:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ret = osal_mutex_create(&s_los_driv_module.lock);
 266:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == ret)
 267:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 268:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_MUTEX;
 269:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 270:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 271:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //load all the static device init
 272:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     osdriv_load_static();
 273:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 274:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEX:
 275:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
 276:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 277:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 278:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //here we define the data structure which used by the driv application apis
 279:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** struct dev_cb
 280:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 281:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     void *nxt;            //used by the open lst
 282:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     void *driv;           //which attached dri here
 283:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     int openflag;       //here means the open state here
 284:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int offset;
 285:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //the following for the debug
 286:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int readbytes;
 287:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int writebytes;
 288:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** };
 289:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 290:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 291:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :open the device with the specified name
 292:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :
 293:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :if first open the device,then will call the init function if exsited
 294:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 295:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** los_dev_t  los_dev_open  (const char *name,unsigned int flag)
 296:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 297:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t opret = true;           //operate result
 298:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *driv = NULL;   //the driver attached
 299:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *dev = NULL;    //the device opened
 300:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if ( NULL == name )
 301:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 302:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_PARAERR;
 303:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 304:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 305:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev = osal_malloc(sizeof(struct dev_cb));
 306:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if (NULL == dev)
 307:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 308:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_MEMERR;
 309:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 310:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) memset(dev,0,sizeof(struct dev_cb));
 311:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 312:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     opret = osal_mutex_lock(s_los_driv_module.lock);
 313:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == opret)
 314:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 315:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_MUTEXERR;
 316:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 9


 317:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 318:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv = __driv_match(name);
 319:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 320:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 321:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_DRIVERR;
 322:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 323:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //WE DON'T CARE TOO MUCH ABOUT THE RD AND WR FLAG,MAY BE TODO IT IN THE NEXT VERSION HERE
 324:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if((O_EXCL & (unsigned int )driv->flagmask) && (NULL != driv->devlst))
 325:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 326:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_EXCLERR;
 327:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 328:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 329:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if((0 == (driv->drivstatus & cn_driv_status_initialized)) && \
 330:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (NULL != driv->op->init))
 331:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 332:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         opret = driv->op->init(driv->pri);
 333:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(false == opret)
 334:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 335:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             driv->errno = en_dev_err_init;
 336:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_INITERR;
 337:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 338:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         driv->drivstatus |= cn_driv_status_initialized;
 339:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 340:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 341:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL != driv->op->open)
 342:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 343:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         opret = driv->op->open(driv->pri,flag);
 344:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(false == opret)
 345:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 346:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             driv->errno = en_dev_err_open;
 347:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_OPENERR;
 348:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 349:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 350:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 351:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //reach here means all the initialize is ok
 352:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //add the dev to the list of the drive and  attach the driv to the device
 353:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->opencounter++;
 354:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev->nxt = driv->devlst;
 355:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->devlst = dev;
 356:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 357:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev->driv = driv;
 358:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev->openflag =  flag;
 359:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 360:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 361:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return dev;
 362:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 363:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_OPENERR:
 364:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_INITERR:
 365:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_EXCLERR:
 366:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_DRIVERR:
 367:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 368:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 369:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     osal_free(dev);
 370:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev = NULL;
 371:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MEMERR:
 372:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_PARAERR:
 373:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return dev;
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 10


 374:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 375:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 376:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 377:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :close the device of opened
 378:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :handle returned by open
 379:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :
 380:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 381:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** bool_t  los_dev_close  (los_dev_t dev)
 382:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 383:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 384:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb *devcb = NULL;
 385:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb *tmp = NULL;
 386:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *driv = NULL;
 387:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 388:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if ( NULL == dev )
 389:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 390:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_PARAERR;
 391:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 392:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     devcb = dev;
 393:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 394:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == osal_mutex_lock(s_los_driv_module.lock))
 395:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 396:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_MUTEXERR;
 397:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 398:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 399:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     //deattach the dev from the driv
 400:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv = devcb->driv;
 401:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 402:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 403:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         goto EXIT_DRIVERR;
 404:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 405:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 406:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(devcb == driv->devlst)
 407:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 408:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         driv->devlst = devcb->nxt;
 409:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 410:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     else
 411:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 412:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         tmp = driv->devlst;
 413:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         while(NULL != tmp)
 414:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 415:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if(tmp->nxt == devcb)
 416:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 417:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 tmp->nxt = devcb->nxt;
 418:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 break;
 419:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 420:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             tmp = tmp->nxt;
 421:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 422:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(NULL == tmp)
 423:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 424:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_DETACHERR;
 425:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 426:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 427:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL != driv->op->close)
 428:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 429:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         driv->op->close(driv->pri);
 430:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 11


 431:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 432:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if((NULL == driv->devlst) && (NULL != driv->op->deinit))
 433:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 434:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         driv->op->deinit(driv->pri);
 435:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         driv->drivstatus &= (~cn_driv_status_initialized);
 436:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 437:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 438:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     osal_free(dev);
 439:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->opencounter--;
 440:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 441:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 442:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 443:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ret = true;
 444:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 445:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_DETACHERR:
 446:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_DRIVERR:
 447:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 448:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 449:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_PARAERR:
 450:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
 451:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 452:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 453:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 454:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :use this function to read data from the device
 455:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 456:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               offet:from where to read,only used for storage device
 457:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               buf:used to storage the data
 458:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               len:the length of the buf
 459:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               timeout:the waittime if no data current
 460:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :how many data has been read to the buf
 461:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 462:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** ssize_t   los_dev_read  (los_dev_t dev,size_t offset, void *buf,size_t len,uint32_t timeout)
 463:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 464:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 465:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 466:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 467:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 468:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if((NULL != dev)&&(NULL != buf)&&(0 != len))
 469:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 470:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         devcb = dev;
 471:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((0 == ((uint32_t)devcb->openflag & O_WRONLY)))
 472:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 473:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             drivcb = devcb->driv;
 474:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->read))
 475:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 476:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 ret = drivcb->op->read( drivcb->pri,offset,buf,len,timeout);
 477:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 if(ret > 0)
 478:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
 479:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                     drivcb->total_read += ret;
 480:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 }
 481:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 482:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 483:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 484:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 485:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
 486:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 487:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 12


 488:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 489:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :use this function to write data to the device
 490:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 491:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               offset: from where to write,only used for storage device
 492:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               buf:the data to be written
 493:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               len:the length of the buf
 494:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               timeout:the waittime if no data current
 495:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :how many data has been written to the device
 496:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 497:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** ssize_t los_dev_write (los_dev_t dev,size_t offset,const void *buf,size_t len, uint32_t timeout)
 498:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 499:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 500:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 501:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 502:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 503:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if((NULL != dev) && (NULL != buf) && (len != 0))
 504:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 505:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         devcb = dev;
 506:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((((uint32_t)devcb->openflag) & O_WRONLY) || (((uint32_t)devcb->openflag) & O_RDWR))
 507:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 508:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             drivcb = devcb->driv;
 509:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->write))
 510:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 511:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 ret = drivcb->op->write( drivcb->pri,offset,buf,len,timeout);
 512:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 if(ret > 0)
 513:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
 514:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                     drivcb->total_write += ret;
 515:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 }
 516:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 517:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 518:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 519:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 520:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
 521:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 522:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 523:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 524:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :use this function to control the device
 525:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 526:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               cmd, must compatible with bsp develop
 527:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               para,used with cmd, its length and format depend on the bsp develop
 528:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :ctrol true or false
 529:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 530:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** bool_t los_dev_ioctl (los_dev_t dev,unsigned int cmd,void *para,int paralen)
 531:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 532:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 533:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 534:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 535:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 536:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL != dev)
 537:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 538:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         devcb = dev;
 539:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         drivcb = devcb->driv;
 540:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->ioctl))
 541:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 542:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             ret = drivcb->op->ioctl( drivcb->pri,cmd,para,paralen);
 543:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 544:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 13


 545:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 546:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
 547:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 548:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 549:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** /*******************************************************************************
 550:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** function     :use this function to set the buffer current position,like lseek
 551:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 552:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               offset, refer to the lseek
 553:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****               fromwhere, refer to the lseek
 554:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** instruction  :return the current write/read position if success, else -1
 555:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** *******************************************************************************/
 556:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** off_t  los_dev_seek (los_dev_t dev,off_t offset,int fromwhere)
 557:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 558:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     off_t ret = -1;
 559:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 560:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 561:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 562:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL != dev)
 563:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 564:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         devcb = dev;
 565:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         drivcb = devcb->driv;
 566:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->seek))
 567:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 568:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             ret = drivcb->op->seek( drivcb->pri,offset,fromwhere);
 569:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 570:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 571:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 572:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return ret;
 573:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 574:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 575:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 576:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //the following function should be implement by the vfs,
 577:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //this is very important for the multi io operation, like the select epoll and so on
 578:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //bool_t     los_dev_upara_set (los_dev_t dev,void *para);
 579:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //void*      los_dev_upara_get (los_dev_t dev);
 580:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 581:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //export some shell for the driver debug
 582:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #ifdef CONFIG_SHELL_ENABLE
 583:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 584:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #include <shell.h>
 585:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** //use this function to show all the driver infomation
 586:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** static int  __driv_show_shell(int argc,const char *argv[])
 587:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 113              		.loc 1 587 1 is_stmt 1 view -0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
 116              		@ frame_needed = 0, uses_anonymous_args = 0
 588:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb  *driv;
 117              		.loc 1 588 5 view .LVU16
 589:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 590:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(osal_mutex_lock(s_los_driv_module.lock))
 118              		.loc 1 590 5 view .LVU17
 587:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb  *driv;
 119              		.loc 1 587 1 is_stmt 0 view .LVU18
 120 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 121              	.LCFI1:
 122              		.cfi_def_cfa_offset 20
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 14


 123              		.cfi_offset 4, -20
 124              		.cfi_offset 5, -16
 125              		.cfi_offset 6, -12
 126              		.cfi_offset 7, -8
 127              		.cfi_offset 14, -4
 128              		.loc 1 590 8 view .LVU19
 129 0002 214D     		ldr	r5, .L19
 587:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb  *driv;
 130              		.loc 1 587 1 view .LVU20
 131 0004 85B0     		sub	sp, sp, #20
 132              	.LCFI2:
 133              		.cfi_def_cfa_offset 40
 134              		.loc 1 590 8 view .LVU21
 135 0006 2868     		ldr	r0, [r5]
 136              	.LVL7:
 137              		.loc 1 590 8 view .LVU22
 138 0008 FFF7FEFF 		bl	osal_mutex_lock
 139              	.LVL8:
 140              		.loc 1 590 7 view .LVU23
 141 000c 70B1     		cbz	r0, .L11
 142              	.LBB4:
 143              	.LBI4:
 586:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** {
 144              		.loc 1 586 13 is_stmt 1 view .LVU24
 145              	.LVL9:
 146              	.LBB5:
 591:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 592:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         link_printf("%s:total %d drivers\n\r",__FUNCTION__,s_los_driv_module.drivnum);
 147              		.loc 1 592 9 view .LVU25
 148              		.loc 1 592 9 view .LVU26
 149 000e 1F4E     		ldr	r6, .L19+4
 150 0010 AA68     		ldr	r2, [r5, #8]
 151 0012 1F49     		ldr	r1, .L19+8
 152 0014 1F48     		ldr	r0, .L19+12
 153 0016 FFF7FEFF 		bl	printf
 154              	.LVL10:
 155              		.loc 1 592 9 view .LVU27
 156 001a 3368     		ldr	r3, [r6]
 157 001c 9868     		ldr	r0, [r3, #8]
 158 001e FFF7FEFF 		bl	fflush
 159              	.LVL11:
 160              		.loc 1 592 9 view .LVU28
 593:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(s_los_driv_module.drivnum != 0) //print all the driver
 161              		.loc 1 593 9 view .LVU29
 162              		.loc 1 593 11 is_stmt 0 view .LVU30
 163 0022 AB68     		ldr	r3, [r5, #8]
 164 0024 2BB9     		cbnz	r3, .L12
 165              	.L15:
 594:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 595:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 596:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             link_printf("%-16s %-8s %-8s %-8s %-8s %-8s %-8s\r\n",\
 597:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                         "drivername","flagmask","status","writbyte","readbyte","open","errno");
 598:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 599:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             driv = s_los_driv_module.drivlst;
 600:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             while(NULL != driv)
 601:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 602:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 link_printf("%-16s %08x %08x %08x %08x %08x %08x\r\n",driv->name,driv->flagmask,\
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 15


 603:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                              driv->drivstatus,driv->total_write,driv->total_read,driv->opencounter,
 604:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 driv=driv->nxt;
 605:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 606:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 607:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 608:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (void) osal_mutex_unlock(s_los_driv_module.lock);
 166              		.loc 1 608 9 is_stmt 1 view .LVU31
 167              		.loc 1 608 16 is_stmt 0 view .LVU32
 168 0026 2868     		ldr	r0, [r5]
 169 0028 FFF7FEFF 		bl	osal_mutex_unlock
 170              	.LVL12:
 171              	.L11:
 172              		.loc 1 608 16 view .LVU33
 173              	.LBE5:
 174              	.LBE4:
 609:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 610:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 611:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return 0;
 175              		.loc 1 611 5 is_stmt 1 view .LVU34
 612:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 176              		.loc 1 612 1 is_stmt 0 view .LVU35
 177 002c 0020     		movs	r0, #0
 178 002e 05B0     		add	sp, sp, #20
 179              	.LCFI3:
 180              		.cfi_remember_state
 181              		.cfi_def_cfa_offset 20
 182              		@ sp needed
 183 0030 F0BD     		pop	{r4, r5, r6, r7, pc}
 184              	.LVL13:
 185              	.L12:
 186              	.LCFI4:
 187              		.cfi_restore_state
 188              	.LBB7:
 189              	.LBB6:
 596:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                         "drivername","flagmask","status","writbyte","readbyte","open","errno");
 190              		.loc 1 596 13 is_stmt 1 view .LVU36
 596:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                         "drivername","flagmask","status","writbyte","readbyte","open","errno");
 191              		.loc 1 596 13 view .LVU37
 192 0032 194B     		ldr	r3, .L19+16
 193 0034 0393     		str	r3, [sp, #12]
 194 0036 194B     		ldr	r3, .L19+20
 195 0038 0293     		str	r3, [sp, #8]
 196 003a 194B     		ldr	r3, .L19+24
 197 003c 0193     		str	r3, [sp, #4]
 198 003e 194B     		ldr	r3, .L19+28
 199 0040 194A     		ldr	r2, .L19+32
 200 0042 1A49     		ldr	r1, .L19+36
 201 0044 0093     		str	r3, [sp]
 202 0046 1A48     		ldr	r0, .L19+40
 203 0048 1A4B     		ldr	r3, .L19+44
 602:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                              driv->drivstatus,driv->total_write,driv->total_read,driv->opencounter,
 204              		.loc 1 602 17 is_stmt 0 view .LVU38
 205 004a 1B4F     		ldr	r7, .L19+48
 596:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                         "drivername","flagmask","status","writbyte","readbyte","open","errno");
 206              		.loc 1 596 13 view .LVU39
 207 004c FFF7FEFF 		bl	printf
 208              	.LVL14:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 16


 596:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                         "drivername","flagmask","status","writbyte","readbyte","open","errno");
 209              		.loc 1 596 13 is_stmt 1 view .LVU40
 210 0050 3368     		ldr	r3, [r6]
 211 0052 9868     		ldr	r0, [r3, #8]
 212 0054 FFF7FEFF 		bl	fflush
 213              	.LVL15:
 596:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                         "drivername","flagmask","status","writbyte","readbyte","open","errno");
 214              		.loc 1 596 13 view .LVU41
 599:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             while(NULL != driv)
 215              		.loc 1 599 13 view .LVU42
 599:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             while(NULL != driv)
 216              		.loc 1 599 18 is_stmt 0 view .LVU43
 217 0058 6C68     		ldr	r4, [r5, #4]
 218              	.LVL16:
 600:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 219              		.loc 1 600 13 is_stmt 1 view .LVU44
 220              	.L13:
 600:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 221              		.loc 1 600 18 view .LVU45
 222 005a 002C     		cmp	r4, #0
 223 005c E3D0     		beq	.L15
 602:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                              driv->drivstatus,driv->total_write,driv->total_read,driv->opencounter,
 224              		.loc 1 602 17 view .LVU46
 602:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                              driv->drivstatus,driv->total_write,driv->total_read,driv->opencounter,
 225              		.loc 1 602 17 view .LVU47
 226 005e A36A     		ldr	r3, [r4, #40]
 227 0060 0393     		str	r3, [sp, #12]
 228 0062 636A     		ldr	r3, [r4, #36]
 229 0064 0293     		str	r3, [sp, #8]
 230 0066 236A     		ldr	r3, [r4, #32]
 231 0068 0193     		str	r3, [sp, #4]
 232 006a E369     		ldr	r3, [r4, #28]
 233 006c 0093     		str	r3, [sp]
 234 006e D4E90212 		ldrd	r1, r2, [r4, #8]
 235 0072 6369     		ldr	r3, [r4, #20]
 236 0074 3846     		mov	r0, r7
 237 0076 FFF7FEFF 		bl	printf
 238              	.LVL17:
 602:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                              driv->drivstatus,driv->total_write,driv->total_read,driv->opencounter,
 239              		.loc 1 602 17 view .LVU48
 240 007a 3368     		ldr	r3, [r6]
 241 007c 9868     		ldr	r0, [r3, #8]
 242 007e FFF7FEFF 		bl	fflush
 243              	.LVL18:
 602:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                              driv->drivstatus,driv->total_write,driv->total_read,driv->opencounter,
 244              		.loc 1 602 17 view .LVU49
 604:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 245              		.loc 1 604 17 view .LVU50
 604:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 246              		.loc 1 604 21 is_stmt 0 view .LVU51
 247 0082 2468     		ldr	r4, [r4]
 248              	.LVL19:
 604:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 249              		.loc 1 604 21 view .LVU52
 250 0084 E9E7     		b	.L13
 251              	.L20:
 252 0086 00BF     		.align	2
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 17


 253              	.L19:
 254 0088 00000000 		.word	.LANCHOR0
 255 008c 00000000 		.word	_impure_ptr
 256 0090 00000000 		.word	.LANCHOR1
 257 0094 00000000 		.word	.LC0
 258 0098 57000000 		.word	.LC5
 259 009c 5D000000 		.word	.LC6
 260 00a0 62000000 		.word	.LC7
 261 00a4 6B000000 		.word	.LC8
 262 00a8 1D000000 		.word	.LC2
 263 00ac 26000000 		.word	.LC3
 264 00b0 31000000 		.word	.LC4
 265 00b4 16000000 		.word	.LC1
 266 00b8 74000000 		.word	.LC9
 267              	.LBE6:
 268              	.LBE7:
 269              		.cfi_endproc
 270              	.LFE15:
 272              		.section	.text.los_driv_register,"ax",%progbits
 273              		.align	1
 274              		.global	los_driv_register
 275              		.syntax unified
 276              		.thumb
 277              		.thumb_func
 278              		.fpu fpv4-sp-d16
 280              	los_driv_register:
 281              	.LVL20:
 282              	.LFB4:
 108:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb  *driv = NULL;
 283              		.loc 1 108 1 is_stmt 1 view -0
 284              		.cfi_startproc
 285              		@ args = 0, pretend = 0, frame = 0
 286              		@ frame_needed = 0, uses_anonymous_args = 0
 109:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 287              		.loc 1 109 5 view .LVU54
 111:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 288              		.loc 1 111 5 view .LVU55
 111:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 289              		.loc 1 111 7 is_stmt 0 view .LVU56
 290 0000 0368     		ldr	r3, [r0]
 108:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb  *driv = NULL;
 291              		.loc 1 108 1 view .LVU57
 292 0002 70B5     		push	{r4, r5, r6, lr}
 293              	.LCFI5:
 294              		.cfi_def_cfa_offset 16
 295              		.cfi_offset 4, -16
 296              		.cfi_offset 5, -12
 297              		.cfi_offset 6, -8
 298              		.cfi_offset 14, -4
 108:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb  *driv = NULL;
 299              		.loc 1 108 1 view .LVU58
 300 0004 0546     		mov	r5, r0
 111:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 301              		.loc 1 111 7 view .LVU59
 302 0006 0BB9     		cbnz	r3, .L22
 303              	.LVL21:
 304              	.L36:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 18


 153:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MALLOC:
 305              		.loc 1 153 5 is_stmt 1 view .LVU60
 156:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 306              		.loc 1 156 12 is_stmt 0 view .LVU61
 307 0008 0024     		movs	r4, #0
 308              	.LVL22:
 156:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 309              		.loc 1 156 12 view .LVU62
 310 000a 2DE0     		b	.L21
 311              	.LVL23:
 312              	.L22:
 111:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 313              		.loc 1 111 28 discriminator 1 view .LVU63
 314 000c 4368     		ldr	r3, [r0, #4]
 315 000e 002B     		cmp	r3, #0
 316 0010 FAD0     		beq	.L36
 116:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 317              		.loc 1 116 5 is_stmt 1 view .LVU64
 116:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 318              		.loc 1 116 12 is_stmt 0 view .LVU65
 319 0012 2C20     		movs	r0, #44
 320              	.LVL24:
 116:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 321              		.loc 1 116 12 view .LVU66
 322 0014 FFF7FEFF 		bl	osal_malloc
 323              	.LVL25:
 117:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 324              		.loc 1 117 5 is_stmt 1 view .LVU67
 117:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 325              		.loc 1 117 7 is_stmt 0 view .LVU68
 326 0018 0446     		mov	r4, r0
 327 001a 0028     		cmp	r0, #0
 328 001c F4D0     		beq	.L36
 121:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 329              		.loc 1 121 5 is_stmt 1 view .LVU69
 121:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 330              		.loc 1 121 12 is_stmt 0 view .LVU70
 331 001e 2C22     		movs	r2, #44
 332 0020 0021     		movs	r1, #0
 333 0022 FFF7FEFF 		bl	memset
 334              	.LVL26:
 124:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->op = para->op;
 335              		.loc 1 124 5 is_stmt 1 view .LVU71
 124:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->op = para->op;
 336              		.loc 1 124 16 is_stmt 0 view .LVU72
 337 0026 2B68     		ldr	r3, [r5]
 338 0028 A360     		str	r3, [r4, #8]
 125:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->pri = para->pri;
 339              		.loc 1 125 5 is_stmt 1 view .LVU73
 125:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->pri = para->pri;
 340              		.loc 1 125 14 is_stmt 0 view .LVU74
 341 002a 6B68     		ldr	r3, [r5, #4]
 130:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 342              		.loc 1 130 17 view .LVU75
 343 002c 0F4E     		ldr	r6, .L37
 125:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->pri = para->pri;
 344              		.loc 1 125 14 view .LVU76
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 19


 345 002e 2361     		str	r3, [r4, #16]
 126:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->flagmask = para->flag;
 346              		.loc 1 126 5 is_stmt 1 view .LVU77
 126:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->flagmask = para->flag;
 347              		.loc 1 126 15 is_stmt 0 view .LVU78
 348 0030 AB68     		ldr	r3, [r5, #8]
 349 0032 6360     		str	r3, [r4, #4]
 127:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 350              		.loc 1 127 5 is_stmt 1 view .LVU79
 127:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 351              		.loc 1 127 20 is_stmt 0 view .LVU80
 352 0034 EB68     		ldr	r3, [r5, #12]
 130:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 353              		.loc 1 130 17 view .LVU81
 354 0036 3068     		ldr	r0, [r6]
 127:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 355              		.loc 1 127 20 view .LVU82
 356 0038 E360     		str	r3, [r4, #12]
 130:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 357              		.loc 1 130 5 is_stmt 1 view .LVU83
 130:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 358              		.loc 1 130 17 is_stmt 0 view .LVU84
 359 003a FFF7FEFF 		bl	osal_mutex_lock
 360              	.LVL27:
 130:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 361              		.loc 1 130 7 view .LVU85
 362 003e 38B1     		cbz	r0, .L25
 135:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 363              		.loc 1 135 5 is_stmt 1 view .LVU86
 135:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 364              		.loc 1 135 16 is_stmt 0 view .LVU87
 365 0040 2868     		ldr	r0, [r5]
 366 0042 FFF7FEFF 		bl	__driv_match
 367              	.LVL28:
 368 0046 0346     		mov	r3, r0
 369 0048 3068     		ldr	r0, [r6]
 135:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 370              		.loc 1 135 7 view .LVU88
 371 004a 2BB1     		cbz	r3, .L26
 137:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 372              		.loc 1 137 9 is_stmt 1 view .LVU89
 373              	.LDL1:
 150:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEX:
 374              		.loc 1 150 5 view .LVU90
 150:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEX:
 375              		.loc 1 150 12 is_stmt 0 view .LVU91
 376 004c FFF7FEFF 		bl	osal_mutex_unlock
 377              	.LVL29:
 378              	.L25:
 152:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv = NULL;
 379              		.loc 1 152 5 is_stmt 1 view .LVU92
 380 0050 2046     		mov	r0, r4
 381 0052 FFF7FEFF 		bl	osal_free
 382              	.LVL30:
 383 0056 D7E7     		b	.L36
 384              	.L26:
 140:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     s_los_driv_module.drivlst = driv;
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 20


 385              		.loc 1 140 5 view .LVU93
 140:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     s_los_driv_module.drivlst = driv;
 386              		.loc 1 140 15 is_stmt 0 view .LVU94
 387 0058 7368     		ldr	r3, [r6, #4]
 388 005a 2360     		str	r3, [r4]
 141:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 389              		.loc 1 141 5 is_stmt 1 view .LVU95
 141:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     (void) osal_mutex_unlock(s_los_driv_module.lock);
 390              		.loc 1 141 31 is_stmt 0 view .LVU96
 391 005c 7460     		str	r4, [r6, #4]
 142:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 392              		.loc 1 142 5 is_stmt 1 view .LVU97
 142:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 393              		.loc 1 142 12 is_stmt 0 view .LVU98
 394 005e FFF7FEFF 		bl	osal_mutex_unlock
 395              	.LVL31:
 144:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 396              		.loc 1 144 5 is_stmt 1 view .LVU99
 144:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 397              		.loc 1 144 30 is_stmt 0 view .LVU100
 398 0062 B368     		ldr	r3, [r6, #8]
 399 0064 0133     		adds	r3, r3, #1
 400 0066 B360     		str	r3, [r6, #8]
 146:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 401              		.loc 1 146 5 is_stmt 1 view .LVU101
 402              	.LVL32:
 403              	.L21:
 157:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 404              		.loc 1 157 1 is_stmt 0 view .LVU102
 405 0068 2046     		mov	r0, r4
 406 006a 70BD     		pop	{r4, r5, r6, pc}
 407              	.LVL33:
 408              	.L38:
 157:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 409              		.loc 1 157 1 view .LVU103
 410              		.align	2
 411              	.L37:
 412 006c 00000000 		.word	.LANCHOR0
 413              		.cfi_endproc
 414              	.LFE4:
 416              		.section	.text.los_driv_unregister,"ax",%progbits
 417              		.align	1
 418              		.global	los_driv_unregister
 419              		.syntax unified
 420              		.thumb
 421              		.thumb_func
 422              		.fpu fpv4-sp-d16
 424              	los_driv_unregister:
 425              	.LVL34:
 426              	.LFB5:
 165:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *tmp = NULL;
 427              		.loc 1 165 1 is_stmt 1 view -0
 428              		.cfi_startproc
 429              		@ args = 0, pretend = 0, frame = 0
 430              		@ frame_needed = 0, uses_anonymous_args = 0
 166:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *pre = NULL;
 431              		.loc 1 166 5 view .LVU105
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 21


 167:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t         ret = false;
 432              		.loc 1 167 5 view .LVU106
 168:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == name)
 433              		.loc 1 168 5 view .LVU107
 169:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 434              		.loc 1 169 5 view .LVU108
 165:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *tmp = NULL;
 435              		.loc 1 165 1 is_stmt 0 view .LVU109
 436 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 437              	.LCFI6:
 438              		.cfi_def_cfa_offset 24
 439              		.cfi_offset 3, -24
 440              		.cfi_offset 4, -20
 441              		.cfi_offset 5, -16
 442              		.cfi_offset 6, -12
 443              		.cfi_offset 7, -8
 444              		.cfi_offset 14, -4
 169:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 445              		.loc 1 169 7 view .LVU110
 446 0002 0646     		mov	r6, r0
 447 0004 10B9     		cbnz	r0, .L40
 448              	.LVL35:
 449              	.L42:
 171:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 450              		.loc 1 171 16 view .LVU111
 451 0006 0024     		movs	r4, #0
 452              	.LVL36:
 453              	.L39:
 208:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 454              		.loc 1 208 1 view .LVU112
 455 0008 2046     		mov	r0, r4
 456 000a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 457              	.LVL37:
 458              	.L40:
 174:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 459              		.loc 1 174 5 is_stmt 1 view .LVU113
 174:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 460              		.loc 1 174 8 is_stmt 0 view .LVU114
 461 000c 114D     		ldr	r5, .L54
 462 000e 2868     		ldr	r0, [r5]
 463              	.LVL38:
 174:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 464              		.loc 1 174 8 view .LVU115
 465 0010 FFF7FEFF 		bl	osal_mutex_lock
 466              	.LVL39:
 174:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 467              		.loc 1 174 7 view .LVU116
 468 0014 0028     		cmp	r0, #0
 469 0016 F6D0     		beq	.L42
 176:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         pre = NULL;
 470              		.loc 1 176 9 is_stmt 1 view .LVU117
 176:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         pre = NULL;
 471              		.loc 1 176 13 is_stmt 0 view .LVU118
 472 0018 6C68     		ldr	r4, [r5, #4]
 473              	.LVL40:
 177:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         while(NULL != tmp)
 474              		.loc 1 177 9 is_stmt 1 view .LVU119
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 22


 178:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 475              		.loc 1 178 9 view .LVU120
 177:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         while(NULL != tmp)
 476              		.loc 1 177 13 is_stmt 0 view .LVU121
 477 001a 0027     		movs	r7, #0
 478              	.LVL41:
 479              	.L43:
 178:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 480              		.loc 1 178 14 is_stmt 1 view .LVU122
 481 001c 1CB9     		cbnz	r4, .L45
 482              	.LVL42:
 483              	.L46:
 204:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 484              		.loc 1 204 9 view .LVU123
 204:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 485              		.loc 1 204 16 is_stmt 0 view .LVU124
 486 001e 2868     		ldr	r0, [r5]
 487 0020 FFF7FEFF 		bl	osal_mutex_unlock
 488              	.LVL43:
 204:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 489              		.loc 1 204 16 view .LVU125
 490 0024 F0E7     		b	.L39
 491              	.LVL44:
 492              	.L45:
 180:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 493              		.loc 1 180 13 is_stmt 1 view .LVU126
 180:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 494              		.loc 1 180 22 is_stmt 0 view .LVU127
 495 0026 A168     		ldr	r1, [r4, #8]
 496 0028 3046     		mov	r0, r6
 497 002a FFF7FEFF 		bl	strcmp
 498              	.LVL45:
 499 002e 2368     		ldr	r3, [r4]
 180:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 500              		.loc 1 180 15 view .LVU128
 501 0030 20B1     		cbz	r0, .L44
 502 0032 2746     		mov	r7, r4
 503 0034 1C46     		mov	r4, r3
 504              	.LVL46:
 180:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 505              		.loc 1 180 15 view .LVU129
 506 0036 F1E7     		b	.L43
 507              	.LVL47:
 508              	.L53:
 195:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 509              		.loc 1 195 17 is_stmt 1 view .LVU130
 195:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 510              		.loc 1 195 26 is_stmt 0 view .LVU131
 511 0038 3B60     		str	r3, [r7]
 512 003a 02E0     		b	.L47
 513              	.L44:
 187:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 514              		.loc 1 187 9 is_stmt 1 view .LVU132
 189:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 515              		.loc 1 189 13 view .LVU133
 189:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 516              		.loc 1 189 15 is_stmt 0 view .LVU134
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 23


 517 003c 002F     		cmp	r7, #0
 518 003e FBD1     		bne	.L53
 191:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 519              		.loc 1 191 17 is_stmt 1 view .LVU135
 191:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 520              		.loc 1 191 43 is_stmt 0 view .LVU136
 521 0040 6B60     		str	r3, [r5, #4]
 522              	.L47:
 198:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             ret = true;
 523              		.loc 1 198 13 is_stmt 1 view .LVU137
 524 0042 2046     		mov	r0, r4
 525 0044 FFF7FEFF 		bl	osal_free
 526              	.LVL48:
 199:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 527              		.loc 1 199 13 view .LVU138
 201:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 528              		.loc 1 201 13 view .LVU139
 201:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 529              		.loc 1 201 38 is_stmt 0 view .LVU140
 530 0048 AB68     		ldr	r3, [r5, #8]
 531 004a 013B     		subs	r3, r3, #1
 532 004c AB60     		str	r3, [r5, #8]
 199:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 533              		.loc 1 199 17 view .LVU141
 534 004e 0124     		movs	r4, #1
 535              	.LVL49:
 199:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 536              		.loc 1 199 17 view .LVU142
 537 0050 E5E7     		b	.L46
 538              	.L55:
 539 0052 00BF     		.align	2
 540              	.L54:
 541 0054 00000000 		.word	.LANCHOR0
 542              		.cfi_endproc
 543              	.LFE5:
 545              		.section	.text.los_driv_event,"ax",%progbits
 546              		.align	1
 547              		.global	los_driv_event
 548              		.syntax unified
 549              		.thumb
 550              		.thumb_func
 551              		.fpu fpv4-sp-d16
 553              	los_driv_event:
 554              	.LVL50:
 555              	.LFB6:
 216:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return false;
 556              		.loc 1 216 1 is_stmt 1 view -0
 557              		.cfi_startproc
 558              		@ args = 0, pretend = 0, frame = 0
 559              		@ frame_needed = 0, uses_anonymous_args = 0
 560              		@ link register save eliminated.
 217:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 561              		.loc 1 217 5 view .LVU144
 218:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 562              		.loc 1 218 1 is_stmt 0 view .LVU145
 563 0000 0020     		movs	r0, #0
 564              	.LVL51:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 24


 218:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 565              		.loc 1 218 1 view .LVU146
 566 0002 7047     		bx	lr
 567              		.cfi_endproc
 568              	.LFE6:
 570              		.section	.text.los_driv_init,"ax",%progbits
 571              		.align	1
 572              		.global	los_driv_init
 573              		.syntax unified
 574              		.thumb
 575              		.thumb_func
 576              		.fpu fpv4-sp-d16
 578              	los_driv_init:
 579              	.LFB8:
 262:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 580              		.loc 1 262 1 is_stmt 1 view -0
 581              		.cfi_startproc
 582              		@ args = 0, pretend = 0, frame = 0
 583              		@ frame_needed = 0, uses_anonymous_args = 0
 263:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 584              		.loc 1 263 5 view .LVU148
 585              	.LVL52:
 265:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == ret)
 586              		.loc 1 265 5 view .LVU149
 262:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 587              		.loc 1 262 1 is_stmt 0 view .LVU150
 588 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 589              	.LCFI7:
 590              		.cfi_def_cfa_offset 24
 591              		.cfi_offset 3, -24
 592              		.cfi_offset 4, -20
 593              		.cfi_offset 5, -16
 594              		.cfi_offset 6, -12
 595              		.cfi_offset 7, -8
 596              		.cfi_offset 14, -4
 265:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == ret)
 597              		.loc 1 265 11 view .LVU151
 598 0002 0A48     		ldr	r0, .L62
 599 0004 FFF7FEFF 		bl	osal_mutex_create
 600              	.LVL53:
 266:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 601              		.loc 1 266 5 is_stmt 1 view .LVU152
 266:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 602              		.loc 1 266 7 is_stmt 0 view .LVU153
 603 0008 0646     		mov	r6, r0
 604 000a 30B1     		cbz	r0, .L57
 272:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 605              		.loc 1 272 5 is_stmt 1 view .LVU154
 606              	.LBB10:
 607              	.LBI10:
 233:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 608              		.loc 1 233 13 view .LVU155
 609              	.LBB11:
 235:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int num = 0;
 610              		.loc 1 235 5 view .LVU156
 236:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     unsigned int i = 0;
 611              		.loc 1 236 5 view .LVU157
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 25


 612              	.LVL54:
 237:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #if defined (__CC_ARM)    //you could add other compiler like this
 613              		.loc 1 237 5 view .LVU158
 243:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     num = ((unsigned int )(uintptr_t)&__osdriv_end - (unsigned int)(uintptr_t)&__osdriv_start)/size
 614              		.loc 1 243 5 view .LVU159
 244:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #endif
 615              		.loc 1 244 5 view .LVU160
 244:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #endif
 616              		.loc 1 244 52 is_stmt 0 view .LVU161
 617 000c 084C     		ldr	r4, .L62+4
 618 000e 094D     		ldr	r5, .L62+8
 619 0010 2D1B     		subs	r5, r5, r4
 244:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** #endif
 620              		.loc 1 244 9 view .LVU162
 621 0012 2D09     		lsrs	r5, r5, #4
 622              	.LVL55:
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 623              		.loc 1 246 5 is_stmt 1 view .LVU163
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 624              		.loc 1 246 11 is_stmt 0 view .LVU164
 625 0014 0027     		movs	r7, #0
 626              	.LVL56:
 627              	.L59:
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 628              		.loc 1 246 14 is_stmt 1 view .LVU165
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 629              		.loc 1 246 5 is_stmt 0 view .LVU166
 630 0016 BD42     		cmp	r5, r7
 631 0018 01D1     		bne	.L60
 632              	.LVL57:
 633              	.L57:
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 634              		.loc 1 246 5 view .LVU167
 635              	.LBE11:
 636              	.LBE10:
 276:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 637              		.loc 1 276 1 view .LVU168
 638 001a 3046     		mov	r0, r6
 639 001c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 640              	.LVL58:
 641              	.L60:
 642              	.LBB13:
 643              	.LBB12:
 248:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         para++;
 644              		.loc 1 248 9 is_stmt 1 view .LVU169
 248:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         para++;
 645              		.loc 1 248 16 is_stmt 0 view .LVU170
 646 001e 2046     		mov	r0, r4
 647 0020 FFF7FEFF 		bl	los_driv_register
 648              	.LVL59:
 249:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 649              		.loc 1 249 9 is_stmt 1 view .LVU171
 249:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 650              		.loc 1 249 13 is_stmt 0 view .LVU172
 651 0024 1034     		adds	r4, r4, #16
 652              	.LVL60:
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 26


 653              		.loc 1 246 20 is_stmt 1 view .LVU173
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 654              		.loc 1 246 21 is_stmt 0 view .LVU174
 655 0026 0137     		adds	r7, r7, #1
 656              	.LVL61:
 246:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 657              		.loc 1 246 21 view .LVU175
 658 0028 F5E7     		b	.L59
 659              	.L63:
 660 002a 00BF     		.align	2
 661              	.L62:
 662 002c 00000000 		.word	.LANCHOR0
 663 0030 00000000 		.word	__osdriv_start
 664 0034 00000000 		.word	__osdriv_end
 665              	.LBE12:
 666              	.LBE13:
 667              		.cfi_endproc
 668              	.LFE8:
 670              		.section	.text.los_dev_open,"ax",%progbits
 671              		.align	1
 672              		.global	los_dev_open
 673              		.syntax unified
 674              		.thumb
 675              		.thumb_func
 676              		.fpu fpv4-sp-d16
 678              	los_dev_open:
 679              	.LVL62:
 680              	.LFB9:
 296:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t opret = true;           //operate result
 681              		.loc 1 296 1 is_stmt 1 view -0
 682              		.cfi_startproc
 683              		@ args = 0, pretend = 0, frame = 0
 684              		@ frame_needed = 0, uses_anonymous_args = 0
 297:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *driv = NULL;   //the driver attached
 685              		.loc 1 297 5 view .LVU177
 298:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *dev = NULL;    //the device opened
 686              		.loc 1 298 5 view .LVU178
 299:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if ( NULL == name )
 687              		.loc 1 299 5 view .LVU179
 300:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 688              		.loc 1 300 5 view .LVU180
 296:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t opret = true;           //operate result
 689              		.loc 1 296 1 is_stmt 0 view .LVU181
 690 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 691              	.LCFI8:
 692              		.cfi_def_cfa_offset 24
 693              		.cfi_offset 3, -24
 694              		.cfi_offset 4, -20
 695              		.cfi_offset 5, -16
 696              		.cfi_offset 6, -12
 697              		.cfi_offset 7, -8
 698              		.cfi_offset 14, -4
 296:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t opret = true;           //operate result
 699              		.loc 1 296 1 view .LVU182
 700 0002 0F46     		mov	r7, r1
 300:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 701              		.loc 1 300 8 view .LVU183
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 27


 702 0004 0446     		mov	r4, r0
 703 0006 08B9     		cbnz	r0, .L65
 704              	.LVL63:
 705              	.L96:
 370:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MEMERR:
 706              		.loc 1 370 5 is_stmt 1 view .LVU184
 373:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 707              		.loc 1 373 12 is_stmt 0 view .LVU185
 708 0008 0025     		movs	r5, #0
 709              	.LVL64:
 373:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 710              		.loc 1 373 12 view .LVU186
 711 000a 42E0     		b	.L64
 712              	.LVL65:
 713              	.L65:
 305:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if (NULL == dev)
 714              		.loc 1 305 5 is_stmt 1 view .LVU187
 305:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if (NULL == dev)
 715              		.loc 1 305 11 is_stmt 0 view .LVU188
 716 000c 1820     		movs	r0, #24
 717              	.LVL66:
 305:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if (NULL == dev)
 718              		.loc 1 305 11 view .LVU189
 719 000e FFF7FEFF 		bl	osal_malloc
 720              	.LVL67:
 306:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 721              		.loc 1 306 5 is_stmt 1 view .LVU190
 306:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 722              		.loc 1 306 8 is_stmt 0 view .LVU191
 723 0012 0546     		mov	r5, r0
 724 0014 0028     		cmp	r0, #0
 725 0016 F7D0     		beq	.L96
 310:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 726              		.loc 1 310 5 is_stmt 1 view .LVU192
 312:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == opret)
 727              		.loc 1 312 13 is_stmt 0 view .LVU193
 728 0018 1F4E     		ldr	r6, .L97
 310:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 729              		.loc 1 310 12 view .LVU194
 730 001a 1822     		movs	r2, #24
 731 001c 0021     		movs	r1, #0
 732 001e FFF7FEFF 		bl	memset
 733              	.LVL68:
 312:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == opret)
 734              		.loc 1 312 5 is_stmt 1 view .LVU195
 312:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(false == opret)
 735              		.loc 1 312 13 is_stmt 0 view .LVU196
 736 0022 3068     		ldr	r0, [r6]
 737 0024 FFF7FEFF 		bl	osal_mutex_lock
 738              	.LVL69:
 313:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 739              		.loc 1 313 5 is_stmt 1 view .LVU197
 313:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 740              		.loc 1 313 7 is_stmt 0 view .LVU198
 741 0028 B8B1     		cbz	r0, .L68
 318:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 742              		.loc 1 318 5 is_stmt 1 view .LVU199
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 28


 318:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 743              		.loc 1 318 12 is_stmt 0 view .LVU200
 744 002a 2046     		mov	r0, r4
 745              	.LVL70:
 318:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 746              		.loc 1 318 12 view .LVU201
 747 002c FFF7FEFF 		bl	__driv_match
 748              	.LVL71:
 319:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 749              		.loc 1 319 5 is_stmt 1 view .LVU202
 319:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 750              		.loc 1 319 7 is_stmt 0 view .LVU203
 751 0030 0446     		mov	r4, r0
 752              	.LVL72:
 319:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 753              		.loc 1 319 7 view .LVU204
 754 0032 78B1     		cbz	r0, .L76
 324:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 755              		.loc 1 324 5 is_stmt 1 view .LVU205
 324:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 756              		.loc 1 324 16 is_stmt 0 view .LVU206
 757 0034 C368     		ldr	r3, [r0, #12]
 324:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 758              		.loc 1 324 7 view .LVU207
 759 0036 1A05     		lsls	r2, r3, #20
 760 0038 01D5     		bpl	.L70
 324:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 761              		.loc 1 324 49 discriminator 1 view .LVU208
 762 003a 8369     		ldr	r3, [r0, #24]
 763 003c 53B9     		cbnz	r3, .L76
 764              	.L70:
 329:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (NULL != driv->op->init))
 765              		.loc 1 329 5 is_stmt 1 view .LVU209
 329:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (NULL != driv->op->init))
 766              		.loc 1 329 32 is_stmt 0 view .LVU210
 767 003e 6369     		ldr	r3, [r4, #20]
 329:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (NULL != driv->op->init))
 768              		.loc 1 329 7 view .LVU211
 769 0040 DB07     		lsls	r3, r3, #31
 770 0042 12D4     		bmi	.L71
 330:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 771              		.loc 1 330 26 discriminator 1 view .LVU212
 772 0044 2369     		ldr	r3, [r4, #16]
 773 0046 9B69     		ldr	r3, [r3, #24]
 329:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         (NULL != driv->op->init))
 774              		.loc 1 329 63 discriminator 1 view .LVU213
 775 0048 7BB1     		cbz	r3, .L71
 332:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(false == opret)
 776              		.loc 1 332 9 is_stmt 1 view .LVU214
 332:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(false == opret)
 777              		.loc 1 332 17 is_stmt 0 view .LVU215
 778 004a 6068     		ldr	r0, [r4, #4]
 779              	.LVL73:
 332:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(false == opret)
 780              		.loc 1 332 17 view .LVU216
 781 004c 9847     		blx	r3
 782              	.LVL74:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 29


 333:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 783              		.loc 1 333 9 is_stmt 1 view .LVU217
 333:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 784              		.loc 1 333 11 is_stmt 0 view .LVU218
 785 004e 40B9     		cbnz	r0, .L72
 335:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_INITERR;
 786              		.loc 1 335 13 is_stmt 1 view .LVU219
 335:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_INITERR;
 787              		.loc 1 335 25 is_stmt 0 view .LVU220
 788 0050 0123     		movs	r3, #1
 789              	.L95:
 346:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_OPENERR;
 790              		.loc 1 346 25 view .LVU221
 791 0052 A362     		str	r3, [r4, #40]
 347:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 792              		.loc 1 347 13 is_stmt 1 view .LVU222
 793              	.L69:
 794              	.L74:
 795              	.L75:
 796              	.LVL75:
 797              	.L76:
 367:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 798              		.loc 1 367 5 view .LVU223
 367:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 799              		.loc 1 367 12 is_stmt 0 view .LVU224
 800 0054 3068     		ldr	r0, [r6]
 801 0056 FFF7FEFF 		bl	osal_mutex_unlock
 802              	.LVL76:
 803              	.L68:
 369:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev = NULL;
 804              		.loc 1 369 5 is_stmt 1 view .LVU225
 805 005a 2846     		mov	r0, r5
 806 005c FFF7FEFF 		bl	osal_free
 807              	.LVL77:
 808 0060 D2E7     		b	.L96
 809              	.LVL78:
 810              	.L72:
 338:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 811              		.loc 1 338 9 view .LVU226
 338:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 812              		.loc 1 338 26 is_stmt 0 view .LVU227
 813 0062 6369     		ldr	r3, [r4, #20]
 814 0064 43F00103 		orr	r3, r3, #1
 815 0068 6361     		str	r3, [r4, #20]
 816              	.LVL79:
 817              	.L71:
 341:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 818              		.loc 1 341 5 is_stmt 1 view .LVU228
 341:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 819              		.loc 1 341 24 is_stmt 0 view .LVU229
 820 006a 2369     		ldr	r3, [r4, #16]
 821 006c 1B68     		ldr	r3, [r3]
 341:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 822              		.loc 1 341 7 view .LVU230
 823 006e 2BB1     		cbz	r3, .L73
 343:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(false == opret)
 824              		.loc 1 343 9 is_stmt 1 view .LVU231
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 30


 343:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if(false == opret)
 825              		.loc 1 343 17 is_stmt 0 view .LVU232
 826 0070 6068     		ldr	r0, [r4, #4]
 827 0072 3946     		mov	r1, r7
 828 0074 9847     		blx	r3
 829              	.LVL80:
 344:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 830              		.loc 1 344 9 is_stmt 1 view .LVU233
 344:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 831              		.loc 1 344 11 is_stmt 0 view .LVU234
 832 0076 08B9     		cbnz	r0, .L73
 346:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_OPENERR;
 833              		.loc 1 346 13 is_stmt 1 view .LVU235
 346:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             goto EXIT_OPENERR;
 834              		.loc 1 346 25 is_stmt 0 view .LVU236
 835 0078 0223     		movs	r3, #2
 836 007a EAE7     		b	.L95
 837              	.LVL81:
 838              	.L73:
 353:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev->nxt = driv->devlst;
 839              		.loc 1 353 5 is_stmt 1 view .LVU237
 353:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev->nxt = driv->devlst;
 840              		.loc 1 353 22 is_stmt 0 view .LVU238
 841 007c 636A     		ldr	r3, [r4, #36]
 360:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return dev;
 842              		.loc 1 360 12 view .LVU239
 843 007e 3068     		ldr	r0, [r6]
 353:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev->nxt = driv->devlst;
 844              		.loc 1 353 22 view .LVU240
 845 0080 0133     		adds	r3, r3, #1
 846 0082 6362     		str	r3, [r4, #36]
 354:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->devlst = dev;
 847              		.loc 1 354 5 is_stmt 1 view .LVU241
 354:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->devlst = dev;
 848              		.loc 1 354 14 is_stmt 0 view .LVU242
 849 0084 A369     		ldr	r3, [r4, #24]
 850 0086 2B60     		str	r3, [r5]
 355:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 851              		.loc 1 355 5 is_stmt 1 view .LVU243
 355:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 852              		.loc 1 355 18 is_stmt 0 view .LVU244
 853 0088 A561     		str	r5, [r4, #24]
 357:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     dev->openflag =  flag;
 854              		.loc 1 357 5 is_stmt 1 view .LVU245
 358:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 855              		.loc 1 358 19 is_stmt 0 view .LVU246
 856 008a C5E90147 		strd	r4, r7, [r5, #4]
 360:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return dev;
 857              		.loc 1 360 5 is_stmt 1 view .LVU247
 360:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     return dev;
 858              		.loc 1 360 12 is_stmt 0 view .LVU248
 859 008e FFF7FEFF 		bl	osal_mutex_unlock
 860              	.LVL82:
 361:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 861              		.loc 1 361 5 is_stmt 1 view .LVU249
 862              	.L64:
 374:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 31


 863              		.loc 1 374 1 is_stmt 0 view .LVU250
 864 0092 2846     		mov	r0, r5
 865 0094 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 866              	.LVL83:
 867              	.L98:
 374:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 868              		.loc 1 374 1 view .LVU251
 869 0096 00BF     		.align	2
 870              	.L97:
 871 0098 00000000 		.word	.LANCHOR0
 872              		.cfi_endproc
 873              	.LFE9:
 875              		.section	.text.los_dev_close,"ax",%progbits
 876              		.align	1
 877              		.global	los_dev_close
 878              		.syntax unified
 879              		.thumb
 880              		.thumb_func
 881              		.fpu fpv4-sp-d16
 883              	los_dev_close:
 884              	.LVL84:
 885              	.LFB10:
 382:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 886              		.loc 1 382 1 is_stmt 1 view -0
 887              		.cfi_startproc
 888              		@ args = 0, pretend = 0, frame = 0
 889              		@ frame_needed = 0, uses_anonymous_args = 0
 383:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb *devcb = NULL;
 890              		.loc 1 383 5 view .LVU253
 384:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb *tmp = NULL;
 891              		.loc 1 384 5 view .LVU254
 385:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *driv = NULL;
 892              		.loc 1 385 5 view .LVU255
 386:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 893              		.loc 1 386 5 view .LVU256
 388:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 894              		.loc 1 388 5 view .LVU257
 382:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 895              		.loc 1 382 1 is_stmt 0 view .LVU258
 896 0000 70B5     		push	{r4, r5, r6, lr}
 897              	.LCFI9:
 898              		.cfi_def_cfa_offset 16
 899              		.cfi_offset 4, -16
 900              		.cfi_offset 5, -12
 901              		.cfi_offset 6, -8
 902              		.cfi_offset 14, -4
 388:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 903              		.loc 1 388 8 view .LVU259
 904 0002 0546     		mov	r5, r0
 905 0004 10B9     		cbnz	r0, .L100
 906              	.LVL85:
 907              	.L102:
 383:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb *devcb = NULL;
 908              		.loc 1 383 12 view .LVU260
 909 0006 0024     		movs	r4, #0
 910              	.LVL86:
 911              	.L99:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 32


 451:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 912              		.loc 1 451 1 view .LVU261
 913 0008 2046     		mov	r0, r4
 914 000a 70BD     		pop	{r4, r5, r6, pc}
 915              	.LVL87:
 916              	.L100:
 392:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 917              		.loc 1 392 5 is_stmt 1 view .LVU262
 394:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 918              		.loc 1 394 5 view .LVU263
 394:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 919              		.loc 1 394 17 is_stmt 0 view .LVU264
 920 000c 1A4E     		ldr	r6, .L123
 921 000e 3068     		ldr	r0, [r6]
 922              	.LVL88:
 394:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 923              		.loc 1 394 17 view .LVU265
 924 0010 FFF7FEFF 		bl	osal_mutex_lock
 925              	.LVL89:
 394:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 926              		.loc 1 394 7 view .LVU266
 927 0014 0028     		cmp	r0, #0
 928 0016 F6D0     		beq	.L102
 400:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 929              		.loc 1 400 5 is_stmt 1 view .LVU267
 400:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     if(NULL == driv)
 930              		.loc 1 400 10 is_stmt 0 view .LVU268
 931 0018 6C68     		ldr	r4, [r5, #4]
 932              	.LVL90:
 401:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 933              		.loc 1 401 5 is_stmt 1 view .LVU269
 401:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 934              		.loc 1 401 7 is_stmt 0 view .LVU270
 935 001a 4CB3     		cbz	r4, .L109
 406:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 936              		.loc 1 406 5 is_stmt 1 view .LVU271
 406:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 937              		.loc 1 406 21 is_stmt 0 view .LVU272
 938 001c A369     		ldr	r3, [r4, #24]
 406:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 939              		.loc 1 406 7 view .LVU273
 940 001e AB42     		cmp	r3, r5
 941 0020 23D1     		bne	.L104
 408:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 942              		.loc 1 408 9 is_stmt 1 view .LVU274
 408:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 943              		.loc 1 408 22 is_stmt 0 view .LVU275
 944 0022 2B68     		ldr	r3, [r5]
 945 0024 A361     		str	r3, [r4, #24]
 946              	.LVL91:
 947              	.L105:
 427:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 948              		.loc 1 427 5 is_stmt 1 view .LVU276
 427:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 949              		.loc 1 427 24 is_stmt 0 view .LVU277
 950 0026 2369     		ldr	r3, [r4, #16]
 951 0028 DB68     		ldr	r3, [r3, #12]
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 33


 427:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 952              		.loc 1 427 7 view .LVU278
 953 002a 0BB1     		cbz	r3, .L107
 429:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 954              		.loc 1 429 9 is_stmt 1 view .LVU279
 955 002c 6068     		ldr	r0, [r4, #4]
 956 002e 9847     		blx	r3
 957              	.LVL92:
 958              	.L107:
 432:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 959              		.loc 1 432 5 view .LVU280
 432:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 960              		.loc 1 432 7 is_stmt 0 view .LVU281
 961 0030 A369     		ldr	r3, [r4, #24]
 962 0032 43B9     		cbnz	r3, .L108
 432:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 963              		.loc 1 432 51 discriminator 1 view .LVU282
 964 0034 2369     		ldr	r3, [r4, #16]
 965 0036 DB69     		ldr	r3, [r3, #28]
 432:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 966              		.loc 1 432 31 discriminator 1 view .LVU283
 967 0038 2BB1     		cbz	r3, .L108
 434:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         driv->drivstatus &= (~cn_driv_status_initialized);
 968              		.loc 1 434 9 is_stmt 1 view .LVU284
 969 003a 6068     		ldr	r0, [r4, #4]
 970 003c 9847     		blx	r3
 971              	.LVL93:
 435:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 972              		.loc 1 435 9 view .LVU285
 435:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     }
 973              		.loc 1 435 26 is_stmt 0 view .LVU286
 974 003e 6369     		ldr	r3, [r4, #20]
 975 0040 23F00103 		bic	r3, r3, #1
 976 0044 6361     		str	r3, [r4, #20]
 977              	.L108:
 438:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     driv->opencounter--;
 978              		.loc 1 438 5 is_stmt 1 view .LVU287
 979 0046 2846     		mov	r0, r5
 980 0048 FFF7FEFF 		bl	osal_free
 981              	.LVL94:
 439:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 982              		.loc 1 439 5 view .LVU288
 439:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 983              		.loc 1 439 22 is_stmt 0 view .LVU289
 984 004c 636A     		ldr	r3, [r4, #36]
 441:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 985              		.loc 1 441 12 view .LVU290
 986 004e 3068     		ldr	r0, [r6]
 439:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 987              		.loc 1 439 22 view .LVU291
 988 0050 013B     		subs	r3, r3, #1
 989 0052 6362     		str	r3, [r4, #36]
 441:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 990              		.loc 1 441 5 is_stmt 1 view .LVU292
 441:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 991              		.loc 1 441 12 is_stmt 0 view .LVU293
 992 0054 FFF7FEFF 		bl	osal_mutex_unlock
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 34


 993              	.LVL95:
 443:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 994              		.loc 1 443 5 is_stmt 1 view .LVU294
 443:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 995              		.loc 1 443 9 is_stmt 0 view .LVU295
 996 0058 0124     		movs	r4, #1
 997              	.LVL96:
 443:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 998              		.loc 1 443 9 view .LVU296
 999 005a 09E0     		b	.L109
 1000              	.LVL97:
 1001              	.L106:
 415:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1002              		.loc 1 415 13 is_stmt 1 view .LVU297
 415:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1003              		.loc 1 415 19 is_stmt 0 view .LVU298
 1004 005c 1A68     		ldr	r2, [r3]
 415:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1005              		.loc 1 415 15 view .LVU299
 1006 005e AA42     		cmp	r2, r5
 1007 0060 02D1     		bne	.L112
 417:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 break;
 1008              		.loc 1 417 17 is_stmt 1 view .LVU300
 417:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 break;
 1009              		.loc 1 417 33 is_stmt 0 view .LVU301
 1010 0062 2A68     		ldr	r2, [r5]
 417:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 break;
 1011              		.loc 1 417 26 view .LVU302
 1012 0064 1A60     		str	r2, [r3]
 418:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             }
 1013              		.loc 1 418 17 is_stmt 1 view .LVU303
 422:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1014              		.loc 1 422 9 view .LVU304
 1015 0066 DEE7     		b	.L105
 1016              	.L112:
 1017 0068 1346     		mov	r3, r2
 1018              	.LVL98:
 1019              	.L104:
 413:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1020              		.loc 1 413 14 view .LVU305
 1021 006a 002B     		cmp	r3, #0
 1022 006c F6D1     		bne	.L106
 383:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb *devcb = NULL;
 1023              		.loc 1 383 12 is_stmt 0 view .LVU306
 1024 006e 1C46     		mov	r4, r3
 1025              	.LVL99:
 1026              	.L103:
 1027              	.L109:
 1028              	.L101:
 1029              	.L110:
 447:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 1030              		.loc 1 447 5 is_stmt 1 view .LVU307
 447:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 1031              		.loc 1 447 12 is_stmt 0 view .LVU308
 1032 0070 3068     		ldr	r0, [r6]
 1033 0072 FFF7FEFF 		bl	osal_mutex_unlock
 1034              	.LVL100:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 35


 450:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 1035              		.loc 1 450 5 is_stmt 1 view .LVU309
 450:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 1036              		.loc 1 450 12 is_stmt 0 view .LVU310
 1037 0076 C7E7     		b	.L99
 1038              	.L124:
 1039              		.align	2
 1040              	.L123:
 1041 0078 00000000 		.word	.LANCHOR0
 1042              		.cfi_endproc
 1043              	.LFE10:
 1045              		.section	.text.los_dev_read,"ax",%progbits
 1046              		.align	1
 1047              		.global	los_dev_read
 1048              		.syntax unified
 1049              		.thumb
 1050              		.thumb_func
 1051              		.fpu fpv4-sp-d16
 1053              	los_dev_read:
 1054              	.LVL101:
 1055              	.LFB11:
 463:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1056              		.loc 1 463 1 is_stmt 1 view -0
 1057              		.cfi_startproc
 1058              		@ args = 4, pretend = 0, frame = 0
 1059              		@ frame_needed = 0, uses_anonymous_args = 0
 464:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1060              		.loc 1 464 5 view .LVU312
 465:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 1061              		.loc 1 465 5 view .LVU313
 466:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1062              		.loc 1 466 5 view .LVU314
 468:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1063              		.loc 1 468 5 view .LVU315
 463:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1064              		.loc 1 463 1 is_stmt 0 view .LVU316
 1065 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
 1066              	.LCFI10:
 1067              		.cfi_def_cfa_offset 24
 1068              		.cfi_offset 4, -12
 1069              		.cfi_offset 5, -8
 1070              		.cfi_offset 14, -4
 463:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1071              		.loc 1 463 1 view .LVU317
 1072 0002 1C46     		mov	r4, r3
 468:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1073              		.loc 1 468 7 view .LVU318
 1074 0004 90B1     		cbz	r0, .L125
 468:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1075              		.loc 1 468 21 discriminator 1 view .LVU319
 1076 0006 9AB1     		cbz	r2, .L130
 468:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1077              		.loc 1 468 36 discriminator 2 view .LVU320
 1078 0008 A3B1     		cbz	r3, .L132
 470:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((0 == ((uint32_t)devcb->openflag & O_WRONLY)))
 1079              		.loc 1 470 9 is_stmt 1 view .LVU321
 1080              	.LVL102:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 36


 471:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1081              		.loc 1 471 9 view .LVU322
 471:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1082              		.loc 1 471 45 is_stmt 0 view .LVU323
 1083 000a 8468     		ldr	r4, [r0, #8]
 471:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1084              		.loc 1 471 11 view .LVU324
 1085 000c E407     		lsls	r4, r4, #31
 1086 000e 0FD4     		bmi	.L130
 473:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->read))
 1087              		.loc 1 473 13 is_stmt 1 view .LVU325
 473:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->read))
 1088              		.loc 1 473 20 is_stmt 0 view .LVU326
 1089 0010 4568     		ldr	r5, [r0, #4]
 1090              	.LVL103:
 474:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1091              		.loc 1 474 13 is_stmt 1 view .LVU327
 474:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1092              		.loc 1 474 31 is_stmt 0 view .LVU328
 1093 0012 2869     		ldr	r0, [r5, #16]
 1094              	.LVL104:
 474:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1095              		.loc 1 474 15 view .LVU329
 1096 0014 50B1     		cbz	r0, .L125
 474:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1097              		.loc 1 474 57 discriminator 1 view .LVU330
 1098 0016 4468     		ldr	r4, [r0, #4]
 474:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1099              		.loc 1 474 36 discriminator 1 view .LVU331
 1100 0018 64B1     		cbz	r4, .L132
 476:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 if(ret > 0)
 1101              		.loc 1 476 17 is_stmt 1 view .LVU332
 476:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 if(ret > 0)
 1102              		.loc 1 476 23 is_stmt 0 view .LVU333
 1103 001a 0698     		ldr	r0, [sp, #24]
 1104 001c 0090     		str	r0, [sp]
 1105 001e 6868     		ldr	r0, [r5, #4]
 1106 0020 A047     		blx	r4
 1107              	.LVL105:
 477:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
 1108              		.loc 1 477 17 is_stmt 1 view .LVU334
 477:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
 1109              		.loc 1 477 19 is_stmt 0 view .LVU335
 1110 0022 0028     		cmp	r0, #0
 477:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
 1111              		.loc 1 477 19 view .LVU336
 1112 0024 02DD     		ble	.L125
 479:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 }
 1113              		.loc 1 479 21 is_stmt 1 view .LVU337
 479:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 }
 1114              		.loc 1 479 40 is_stmt 0 view .LVU338
 1115 0026 2B6A     		ldr	r3, [r5, #32]
 1116 0028 0344     		add	r3, r3, r0
 1117 002a 2B62     		str	r3, [r5, #32]
 1118              	.LVL106:
 1119              	.L125:
 486:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 37


 1120              		.loc 1 486 1 view .LVU339
 1121 002c 03B0     		add	sp, sp, #12
 1122              	.LCFI11:
 1123              		.cfi_remember_state
 1124              		.cfi_def_cfa_offset 12
 1125              		@ sp needed
 1126 002e 30BD     		pop	{r4, r5, pc}
 1127              	.LVL107:
 1128              	.L130:
 1129              	.LCFI12:
 1130              		.cfi_restore_state
 464:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1131              		.loc 1 464 13 view .LVU340
 1132 0030 0020     		movs	r0, #0
 1133              	.LVL108:
 464:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1134              		.loc 1 464 13 view .LVU341
 1135 0032 FBE7     		b	.L125
 1136              	.L132:
 1137 0034 2046     		mov	r0, r4
 1138              	.LVL109:
 485:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 1139              		.loc 1 485 5 is_stmt 1 view .LVU342
 485:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 1140              		.loc 1 485 12 is_stmt 0 view .LVU343
 1141 0036 F9E7     		b	.L125
 1142              		.cfi_endproc
 1143              	.LFE11:
 1145              		.section	.text.los_dev_write,"ax",%progbits
 1146              		.align	1
 1147              		.global	los_dev_write
 1148              		.syntax unified
 1149              		.thumb
 1150              		.thumb_func
 1151              		.fpu fpv4-sp-d16
 1153              	los_dev_write:
 1154              	.LVL110:
 1155              	.LFB12:
 498:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1156              		.loc 1 498 1 is_stmt 1 view -0
 1157              		.cfi_startproc
 1158              		@ args = 4, pretend = 0, frame = 0
 1159              		@ frame_needed = 0, uses_anonymous_args = 0
 499:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1160              		.loc 1 499 5 view .LVU345
 500:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 1161              		.loc 1 500 5 view .LVU346
 501:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1162              		.loc 1 501 5 view .LVU347
 503:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1163              		.loc 1 503 5 view .LVU348
 498:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1164              		.loc 1 498 1 is_stmt 0 view .LVU349
 1165 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
 1166              	.LCFI13:
 1167              		.cfi_def_cfa_offset 24
 1168              		.cfi_offset 4, -12
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 38


 1169              		.cfi_offset 5, -8
 1170              		.cfi_offset 14, -4
 498:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1171              		.loc 1 498 1 view .LVU350
 1172 0002 1C46     		mov	r4, r3
 503:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1173              		.loc 1 503 7 view .LVU351
 1174 0004 98B1     		cbz	r0, .L133
 503:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1175              		.loc 1 503 22 discriminator 1 view .LVU352
 1176 0006 A2B1     		cbz	r2, .L136
 503:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1177              		.loc 1 503 39 discriminator 2 view .LVU353
 1178 0008 ABB1     		cbz	r3, .L140
 505:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((((uint32_t)devcb->openflag) & O_WRONLY) || (((uint32_t)devcb->openflag) & O_RDWR))
 1179              		.loc 1 505 9 is_stmt 1 view .LVU354
 1180              	.LVL111:
 506:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1181              		.loc 1 506 9 view .LVU355
 506:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1182              		.loc 1 506 53 is_stmt 0 view .LVU356
 1183 000a 8468     		ldr	r4, [r0, #8]
 506:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1184              		.loc 1 506 11 view .LVU357
 1185 000c 14F00304 		ands	r4, r4, #3
 1186 0010 11D0     		beq	.L140
 508:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->write))
 1187              		.loc 1 508 13 is_stmt 1 view .LVU358
 508:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->write))
 1188              		.loc 1 508 20 is_stmt 0 view .LVU359
 1189 0012 4568     		ldr	r5, [r0, #4]
 1190              	.LVL112:
 509:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1191              		.loc 1 509 13 is_stmt 1 view .LVU360
 509:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1192              		.loc 1 509 31 is_stmt 0 view .LVU361
 1193 0014 2869     		ldr	r0, [r5, #16]
 1194              	.LVL113:
 509:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1195              		.loc 1 509 15 view .LVU362
 1196 0016 50B1     		cbz	r0, .L133
 509:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1197              		.loc 1 509 57 discriminator 1 view .LVU363
 1198 0018 8468     		ldr	r4, [r0, #8]
 509:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****             {
 1199              		.loc 1 509 36 discriminator 1 view .LVU364
 1200 001a 64B1     		cbz	r4, .L140
 511:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 if(ret > 0)
 1201              		.loc 1 511 17 is_stmt 1 view .LVU365
 511:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 if(ret > 0)
 1202              		.loc 1 511 23 is_stmt 0 view .LVU366
 1203 001c 0698     		ldr	r0, [sp, #24]
 1204 001e 0090     		str	r0, [sp]
 1205 0020 6868     		ldr	r0, [r5, #4]
 1206 0022 A047     		blx	r4
 1207              	.LVL114:
 512:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 39


 1208              		.loc 1 512 17 is_stmt 1 view .LVU367
 512:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
 1209              		.loc 1 512 19 is_stmt 0 view .LVU368
 1210 0024 0028     		cmp	r0, #0
 512:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 {
 1211              		.loc 1 512 19 view .LVU369
 1212 0026 02DD     		ble	.L133
 514:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 }
 1213              		.loc 1 514 21 is_stmt 1 view .LVU370
 514:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****                 }
 1214              		.loc 1 514 41 is_stmt 0 view .LVU371
 1215 0028 EB69     		ldr	r3, [r5, #28]
 1216 002a 0344     		add	r3, r3, r0
 1217 002c EB61     		str	r3, [r5, #28]
 1218              	.LVL115:
 1219              	.L133:
 521:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1220              		.loc 1 521 1 view .LVU372
 1221 002e 03B0     		add	sp, sp, #12
 1222              	.LCFI14:
 1223              		.cfi_remember_state
 1224              		.cfi_def_cfa_offset 12
 1225              		@ sp needed
 1226 0030 30BD     		pop	{r4, r5, pc}
 1227              	.LVL116:
 1228              	.L136:
 1229              	.LCFI15:
 1230              		.cfi_restore_state
 499:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1231              		.loc 1 499 13 view .LVU373
 1232 0032 1046     		mov	r0, r2
 1233              	.LVL117:
 499:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1234              		.loc 1 499 13 view .LVU374
 1235 0034 FBE7     		b	.L133
 1236              	.L140:
 499:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1237              		.loc 1 499 13 view .LVU375
 1238 0036 2046     		mov	r0, r4
 1239              	.LVL118:
 520:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 1240              		.loc 1 520 5 is_stmt 1 view .LVU376
 520:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** }
 1241              		.loc 1 520 12 is_stmt 0 view .LVU377
 1242 0038 F9E7     		b	.L133
 1243              		.cfi_endproc
 1244              	.LFE12:
 1246              		.section	.text.los_dev_ioctl,"ax",%progbits
 1247              		.align	1
 1248              		.global	los_dev_ioctl
 1249              		.syntax unified
 1250              		.thumb
 1251              		.thumb_func
 1252              		.fpu fpv4-sp-d16
 1254              	los_dev_ioctl:
 1255              	.LVL119:
 1256              	.LFB13:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 40


 531:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 1257              		.loc 1 531 1 is_stmt 1 view -0
 1258              		.cfi_startproc
 1259              		@ args = 0, pretend = 0, frame = 0
 1260              		@ frame_needed = 0, uses_anonymous_args = 0
 1261              		@ link register save eliminated.
 532:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1262              		.loc 1 532 5 view .LVU379
 533:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 1263              		.loc 1 533 5 view .LVU380
 534:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1264              		.loc 1 534 5 view .LVU381
 536:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1265              		.loc 1 536 5 view .LVU382
 531:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     bool_t ret = false;
 1266              		.loc 1 531 1 is_stmt 0 view .LVU383
 1267 0000 10B4     		push	{r4}
 1268              	.LCFI16:
 1269              		.cfi_def_cfa_offset 4
 1270              		.cfi_offset 4, -4
 536:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1271              		.loc 1 536 7 view .LVU384
 1272 0002 48B1     		cbz	r0, .L141
 538:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         drivcb = devcb->driv;
 1273              		.loc 1 538 9 is_stmt 1 view .LVU385
 1274              	.LVL120:
 539:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->ioctl))
 1275              		.loc 1 539 9 view .LVU386
 539:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->ioctl))
 1276              		.loc 1 539 16 is_stmt 0 view .LVU387
 1277 0004 4068     		ldr	r0, [r0, #4]
 1278              	.LVL121:
 540:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1279              		.loc 1 540 9 is_stmt 1 view .LVU388
 540:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1280              		.loc 1 540 27 is_stmt 0 view .LVU389
 1281 0006 0469     		ldr	r4, [r0, #16]
 540:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1282              		.loc 1 540 11 view .LVU390
 1283 0008 34B1     		cbz	r4, .L141
 540:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1284              		.loc 1 540 53 discriminator 1 view .LVU391
 1285 000a 2469     		ldr	r4, [r4, #16]
 540:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1286              		.loc 1 540 32 discriminator 1 view .LVU392
 1287 000c 24B1     		cbz	r4, .L141
 542:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 1288              		.loc 1 542 13 is_stmt 1 view .LVU393
 542:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 1289              		.loc 1 542 19 is_stmt 0 view .LVU394
 1290 000e A446     		mov	ip, r4
 1291 0010 4068     		ldr	r0, [r0, #4]
 1292              	.LVL122:
 547:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1293              		.loc 1 547 1 view .LVU395
 1294 0012 5DF8044B 		ldr	r4, [sp], #4
 1295              	.LCFI17:
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 41


 1296              		.cfi_remember_state
 1297              		.cfi_restore 4
 1298              		.cfi_def_cfa_offset 0
 542:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 1299              		.loc 1 542 19 view .LVU396
 1300 0016 6047     		bx	ip
 1301              	.LVL123:
 1302              	.L141:
 1303              	.LCFI18:
 1304              		.cfi_restore_state
 547:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1305              		.loc 1 547 1 view .LVU397
 1306 0018 0020     		movs	r0, #0
 1307 001a 5DF8044B 		ldr	r4, [sp], #4
 1308              	.LCFI19:
 1309              		.cfi_restore 4
 1310              		.cfi_def_cfa_offset 0
 1311 001e 7047     		bx	lr
 1312              		.cfi_endproc
 1313              	.LFE13:
 1315              		.section	.text.los_dev_seek,"ax",%progbits
 1316              		.align	1
 1317              		.global	los_dev_seek
 1318              		.syntax unified
 1319              		.thumb
 1320              		.thumb_func
 1321              		.fpu fpv4-sp-d16
 1323              	los_dev_seek:
 1324              	.LVL124:
 1325              	.LFB14:
 557:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     off_t ret = -1;
 1326              		.loc 1 557 1 is_stmt 1 view -0
 1327              		.cfi_startproc
 1328              		@ args = 0, pretend = 0, frame = 0
 1329              		@ frame_needed = 0, uses_anonymous_args = 0
 1330              		@ link register save eliminated.
 558:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 1331              		.loc 1 558 5 view .LVU399
 559:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 1332              		.loc 1 559 5 view .LVU400
 560:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1333              		.loc 1 560 5 view .LVU401
 562:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1334              		.loc 1 562 5 view .LVU402
 562:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****     {
 1335              		.loc 1 562 7 is_stmt 0 view .LVU403
 1336 0000 30B1     		cbz	r0, .L149
 564:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         drivcb = devcb->driv;
 1337              		.loc 1 564 9 is_stmt 1 view .LVU404
 1338              	.LVL125:
 565:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->seek))
 1339              		.loc 1 565 9 view .LVU405
 565:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->seek))
 1340              		.loc 1 565 16 is_stmt 0 view .LVU406
 1341 0002 4068     		ldr	r0, [r0, #4]
 1342              	.LVL126:
 566:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 42


 1343              		.loc 1 566 9 is_stmt 1 view .LVU407
 566:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1344              		.loc 1 566 27 is_stmt 0 view .LVU408
 1345 0004 0369     		ldr	r3, [r0, #16]
 566:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1346              		.loc 1 566 11 view .LVU409
 1347 0006 1BB1     		cbz	r3, .L149
 566:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1348              		.loc 1 566 53 discriminator 1 view .LVU410
 1349 0008 5B69     		ldr	r3, [r3, #20]
 566:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         {
 1350              		.loc 1 566 32 discriminator 1 view .LVU411
 1351 000a 0BB1     		cbz	r3, .L149
 568:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 1352              		.loc 1 568 13 is_stmt 1 view .LVU412
 568:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 1353              		.loc 1 568 19 is_stmt 0 view .LVU413
 1354 000c 4068     		ldr	r0, [r0, #4]
 1355              	.LVL127:
 568:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c ****         }
 1356              		.loc 1 568 19 view .LVU414
 1357 000e 1847     		bx	r3
 1358              	.LVL128:
 1359              	.L149:
 573:C:/Users/²Ü¼ÒºÀ/.iotlink/sdk/IoT_LINK/iot_link/driver\driver.c **** 
 1360              		.loc 1 573 1 view .LVU415
 1361 0010 4FF0FF30 		mov	r0, #-1
 1362 0014 7047     		bx	lr
 1363              		.cfi_endproc
 1364              	.LFE14:
 1366              		.section	.rodata.str1.1,"aMS",%progbits,1
 1367              	.LC10:
 1368 0000 6465766C 		.ascii	"devlst\000"
 1368      737400
 1369              		.section	.bss.s_los_driv_module,"aw",%nobits
 1370              		.align	2
 1371              		.set	.LANCHOR0,. + 0
 1374              	s_los_driv_module:
 1375 0000 00000000 		.space	12
 1375      00000000 
 1375      00000000 
 1376              		.section	.rodata.__FUNCTION__.7771,"a"
 1377              		.set	.LANCHOR1,. + 0
 1380              	__FUNCTION__.7771:
 1381 0000 5F5F6472 		.ascii	"__driv_show_shell\000"
 1381      69765F73 
 1381      686F775F 
 1381      7368656C 
 1381      6C00
 1382              		.section	oshell,"a"
 1383              		.align	2
 1386              	__oshell___driv_show_shell:
 1387 0000 00000000 		.word	.LC10
 1388 0004 00000000 		.word	.LC10
 1389 0008 00000000 		.word	__driv_show_shell
 1390 000c 0000     		.short	0
 1391 000e 0400     		.short	4
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 43


 1392              		.text
 1393              	.Letext0:
 1394              		.file 2 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\lib\\gcc\\arm-no
 1395              		.file 3 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\i
 1396              		.file 4 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\i
 1397              		.file 5 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\i
 1398              		.file 6 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\i
 1399              		.file 7 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\i
 1400              		.file 8 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\i
 1401              		.file 9 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\i
 1402              		.file 10 "C:/Users/\262\334\274\322\272\300/.iotlink/sdk/IoT_LINK/iot_link/os/osal/osal_types.h"
 1403              		.file 11 "C:/Users/\262\334\274\322\272\300/.iotlink/sdk/IoT_LINK/iot_link/driver/driver.h"
 1404              		.file 12 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\
 1405              		.file 13 "C:/Users/\262\334\274\322\272\300/.iotlink/sdk/IoT_LINK/iot_link/inc/shell.h"
 1406              		.file 14 "C:/Users/\262\334\274\322\272\300/.iotlink/sdk/IoT_LINK/iot_link/os/osal/osal.h"
 1407              		.file 15 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\
 1408              		.file 16 "c:\\users\\\262\334\274\322\272\300\\.iotlink\\tools\\gcc-arm-none-eabi\\arm-none-eabi\\
 1409              		.file 17 "<built-in>"
ARM GAS  C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s 			page 44


DEFINED SYMBOLS
                            *ABS*:00000000 driver.c
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:18     .text.__driv_match:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:25     .text.__driv_match:00000000 __driv_match
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:78     .text.__driv_match:00000020 $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:104    .text.__driv_show_shell:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:110    .text.__driv_show_shell:00000000 __driv_show_shell
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:254    .text.__driv_show_shell:00000088 $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:273    .text.los_driv_register:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:280    .text.los_driv_register:00000000 los_driv_register
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:412    .text.los_driv_register:0000006c $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:417    .text.los_driv_unregister:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:424    .text.los_driv_unregister:00000000 los_driv_unregister
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:541    .text.los_driv_unregister:00000054 $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:546    .text.los_driv_event:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:553    .text.los_driv_event:00000000 los_driv_event
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:571    .text.los_driv_init:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:578    .text.los_driv_init:00000000 los_driv_init
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:662    .text.los_driv_init:0000002c $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:671    .text.los_dev_open:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:678    .text.los_dev_open:00000000 los_dev_open
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:871    .text.los_dev_open:00000098 $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:876    .text.los_dev_close:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:883    .text.los_dev_close:00000000 los_dev_close
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1041   .text.los_dev_close:00000078 $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1046   .text.los_dev_read:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1053   .text.los_dev_read:00000000 los_dev_read
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1146   .text.los_dev_write:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1153   .text.los_dev_write:00000000 los_dev_write
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1247   .text.los_dev_ioctl:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1254   .text.los_dev_ioctl:00000000 los_dev_ioctl
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1316   .text.los_dev_seek:00000000 $t
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1323   .text.los_dev_seek:00000000 los_dev_seek
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1370   .bss.s_los_driv_module:00000000 $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1374   .bss.s_los_driv_module:00000000 s_los_driv_module
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1380   .rodata.__FUNCTION__.7771:00000000 __FUNCTION__.7771
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1383   oshell:00000000 $d
C:\Users\²Ü¼ÒºÀ\AppData\Local\Temp\cc3CmPKf.s:1386   oshell:00000000 __oshell___driv_show_shell

UNDEFINED SYMBOLS
strcmp
osal_mutex_lock
printf
fflush
osal_mutex_unlock
_impure_ptr
osal_malloc
memset
osal_free
osal_mutex_create
__osdriv_start
__osdriv_end
